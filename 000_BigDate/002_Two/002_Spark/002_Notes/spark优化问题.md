# spark优化问题

## A1 关于数据本地化

### 1.1 关于三者设置时间是否统一

![image-20210327102422184](spark%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98.assets/image-20210327102422184.png)

默认都是一样的。

也可以各自设置各自的值。

没有重试机制，最差就是ANY。

### 1.2 关于TaskScheduler任务调度和数据本地化重试次数

任务调度：3次（阶段：运行中，失败重试）

数据本地化：5次（阶段：运行前，任务发送失败重试）

## A2 内存调优

### 2.1 背压机制

![image-20210327104025582](spark%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98.assets/image-20210327104025582.png)

背压机制效果：

![image-20210327104259899](spark%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98.assets/image-20210327104259899.png)

