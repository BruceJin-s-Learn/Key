## 01 Java 基础 |  017 反射

#### 1. what

+ 动态语言：程序运行时可改变程序结构或变量类型。如python、Ruby。Java不是，但有动态相关的机制：Reflection。

+ Java反射机制：

  + 在运行状态中，任意类的所有属性和方法；任意对象的方法和属性，动态获取信息和调用对象的方法的功能，就是反射机制。

+ 可实现功能：

  + 在运行时，判断任意对象所属类
  + 在运行时，构造任意类的对象
  + 在运行时，判断任意类所具有成员变量和方法
  + 在运行时，调用任意对象方法
  + 生成动态代理

  


#### 2. why

+ 普通编译有一个限制：这个类型在编译时必须已知，这样才能使用RTTI识别它，并利用这些信息完成其他操作。

+ RTTI（Run-Time Type Identification）是Java中非常有用的机制，在Java运行时，RTTI维护类的相关信息。多态(polymorphism)是基于RTTI实现的。RTTI的功能主要是由Class类实现的。

+ 为了突破这种限制，Java反射提供了一种机制：用来检查可用的方法，并返回方法名。

  |                RTTI                |                             反射                             |
  | :--------------------------------: | :----------------------------------------------------------: |
  | 编译器在编译时打开和检查.class文件 | .class文件在编译时时不可获取的，所以是在运行时打开和检查.class文件 |

  

#### 3. how

+ 支持：Class类和java.lang.reflect类库（包含Field、Method以及Constructor类（每个类都实现了Member接口））
+ Constructor创建新的对象
+ get()和set()方法读取和修改与Field对象关联的字段
+ invoke()方法调用与Method对象关联的方法